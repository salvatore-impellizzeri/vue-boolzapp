<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- CSS BOOTSTRAP -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

        <!-- CSS -->
        <link rel="stylesheet" href="css/style.css">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer"/>

        <!-- CDN Icon Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

        <title>Whatsapp</title>
    </head>
    <body>

    <div id="app">
        
        <!-- CONTENT -->

        <div id="bg-content">
            <div id="content" class="row d-flex">

                <!-- LAT BAR -->

                <div id="lat-bar" class="col-4 p-0">

                    <!-- LAT BAR HEADER -->

                    <header class="content-header p-2 d-flex align-items-center justify-content-between">
                        <div class="user-io d-flex align-items-center">
                            <div class="icon">
                                <img src="img/avatar_io.jpg" alt="">
                            </div>
                            <div class="fw-medium user-name">Sofia</div>
                        </div>

                        <div class="tools d-flex justify-content-between">
                            <i class="fa-solid fa-circle-notch"></i>
                            <i class="fa-solid fa-message"></i>
                            <i class="fa-solid fa-ellipsis-vertical"></i>
                        </div>

                    </header>

                    <!-- ATTIVAZIONE NOTIFICHE -->
                    
                    <div class="notifiche d-flex align-items-center p-3">
                        <div class="box-bell">
                            <i class="fa-solid fa-bell-slash"></i>
                        </div>
                        <div class="d-flex flex-wrap notifiche-texts">
                            <div class="w-100 fw-medium">Ricevi notifiche di nuovi messaggi</div>
                            <a href="#">Attiva notifiche desktop</a>
                        </div>
                    </div>

                    <!-- SEARCH BAR -->

                    <div class="bg-search">
                        <nav class="navbar bg-body-tertiary py-2">
                            <div class="container-fluid px-2">
                              <form class="d-flex w-100" role="search">
                                <button class="d-flex align-items-center">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </button>
                                <input class="form-control input-class" type="search" placeholder="Cerca o inizia una nuova chat" aria-label="Search">
                              </form>
                            </div>
                          </nav>
                    </div>

                    <!-- CONTATTI -->
                    <div id="all-contacts">
                        <div class="contact d-flex align-items-center p-3" v-for="(contact, i) in contacts">
                            <div class="d-flex left-contact" @click="toggleChat(i)">
                                <div class="icon">
                                    <img :src="contacts[i].avatar" :alt="contacts[i].avatar" class="me-4">
                                </div>
                                <div>
                                    <div class="fw-medium">{{ contacts[i].name }}</div>
                                    <div v-if="contact.messages.length > 0" class="last-message">{{ contact.messages[contact.messages.length - 1].message }}</div>
                                </div>
                            </div>
                            <div class="right-contact py-2">
                                <div v-if="contact.messages.length > 0" class="last-message-hour justify-content-end d-flex align-items-start">{{ contact.messages[contact.messages.length - 1].hour }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CHAT CONTENT -->

                <div id="chat-content" class="col-8 p-0">  
                    
                    <header class="content-header border-start border-secondary-subtle">
                        <div class="d-flex align-items-center justify-content-between h-100 px-2">
                            <div class="d-flex align-items-center w-50">
                                <div class="icon me-3">
                                    <img :src="contacts[activeChat].avatar" :alt="contacts[activeChat].name">
                                </div>
                                <div class="d-flex flex-wrap">
                                    <div class="fw-medium w-100">
                                        {{ contacts[activeChat].name }}
                                    </div>
                                    <div class="last-access" v-if="contact.messages.length > 0">
                                        Ultimo accesso {{ contact.messages[contact.messages.length - 1].date }} alle {{ contact.messages[contact.messages.length - 1].hour }};
                                    </div>
                                </div>
                            </div>
                            <div>

                            </div>
                        </div>
                    </header>

                </div>     
            </div>
        </div>

        <!-- MAIN -->

        <main>

            <div class="container">

            </div>

        </main>

        <!-- FOOTER -->

        <Footer>

            <div class="container"></div>

        </Footer>

    </div>

        <!-- JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script src="js/scripts.js"></script>
    </body>
</html>